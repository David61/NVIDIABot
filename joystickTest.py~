
#import serial
#import pygame
import time
import serial
import math
#serialPort = '/dev/tty.usbserial-A7004Jg4' # Arduino Mega
#serialPort = '/dev/tty.usbmodemfd121'       # Arduino Uno
baudRate = 9600

# Open Serial Connection to Arduino Board
#ser = serial.Serial(serialPort, baudRate, timeout=1);

'''
Gets joystick data and prints it
'''

#pygame.init()
#pyserial.init()
#joystick.init()
#j = pygame.joystick.Joystick(0)
#j.init()

ser = serial.Serial("COM6", 9600)
time.sleep(2);
#print j.get_name()

# Keeps a history of buttons pressed so that one press does
# not send multiple presses to the Arduino Board
#button_history = [0,0,0,0,0,0,0,0,0,0,0,0]
#ser.write('H')
try:
    while True:
        pygame.event.pump()

        # Used to read input from the two joysticks       
        axis1 = j.get_axis(1);
        
        print "serial sent"

        print axis1
        axis1 = axis1 * -1
        mSpeed=90
        if(axis1 != 0.0):
            if(axis1<0.075):
                axis = math.fabs(axis1)
                mSpeed=axis*90
                #mSpeed = math.floor(mSpeed)
                #print "greater"
                mSpeed = mSpeed+90
                #print mSpeed
            elif(axis1>-0.075 ):
                #print "less"
                axis=math.fabs(axis1)
                #mSpeed = math.floor(mSpeed)
                #print axis
                mSpeed=axis*90
                mSpeed = 90-mSpeed
                #print mSpeed
      

        print mSpeed
        ser.write(chr(int(mSpeed)))
                  
        print ser.readline()
